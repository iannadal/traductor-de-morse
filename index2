<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traductor Morse</title>
    <script type="module">
        // Importar funciones de Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";

        // Configuración de Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDENDwnOm0jF2mqrC7TNANbdvVlxyN7gXE",
            authDomain: "traductor-de-morse.firebaseapp.com",
            databaseURL: "https://traductor-de-morse-default-rtdb.firebaseio.com",
            projectId: "traductor-de-morse",
            storageBucket: "traductor-de-morse.firebasestorage.app",
            messagingSenderId: "856524425474",
            appId: "1:856524425474:web:b689e08d616f7d60c11a1b"
        };

        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);

        // Función de inicio de sesión
        function iniciarSesion() {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            signInWithEmailAndPassword(auth, email, password)
                .then(() => {
                    // Si la autenticación es exitosa, muestra el contenido
                    document.getElementById("login").style.display = "none";
                    document.getElementById("contenido").style.display = "block";
                })
                .catch((error) => {
                    // Si hay un error, muestra un mensaje
                    alert("Error de autenticación: " + error.message);
                });
        }

        // Función para enviar el texto a Firebase
        function enviarTexto() {
            const texto = document.getElementById("texto").value;
            if (texto !== "") {
                set(ref(db, "/text_to_morse/input"), texto)
                    .then(() => {
                        document.getElementById("mensaje").innerText = "Texto enviado a Firebase exitosamente!";
                    })
                    .catch((error) => {
                        document.getElementById("mensaje").innerText = "Error: " + error;
                    });
            } else {
                document.getElementById("mensaje").innerText = "Por favor, ingresa un texto.";
            }
        }
    </script>
</head>
<body>

    <!-- Pantalla de login -->
    <div id="login" style="text-align:center; margin-top:50px;">
        <h1>Iniciar sesión</h1>
        <input type="email" id="email" placeholder="Correo electrónico"><br>
        <input type="password" id="password" placeholder="Contraseña"><br>
        <button onclick="iniciarSesion()">Entrar</button>
        <p id="mensaje"></p>
    </div>

    <!-- Contenido protegido -->
    <div id="contenido" style="display:none; text-align:center; margin-top:50px;">
        <h1>Bienvenido al Traductor Morse</h1>
        <p>Introduce un texto en español para enviarlo a Firebase.</p>
        <input type="text" id="texto" placeholder="Escribe aquí tu texto">
        <button onclick="enviarTexto()">Enviar a Firebase</button>
        <p id="mensaje"></p>
    </div>

</body>
</html>
